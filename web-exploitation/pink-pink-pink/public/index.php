<?php $cmd=NULL;if(isset($_POST['Submit'])){$target=trim($_REQUEST['ip']);$filter=array('&'=>'',';'=>'','| '=>'','-'=>'','$'=>'','('=>'',')'=>'','`'=>'','||'=>'',);$target=str_replace(array_keys($filter),$filter,$target);if(stristr(php_uname('s'),'Windows NT')){$cmd=shell_exec('ping  '.$target);}else{$cmd=shell_exec('ping  -c 4 '.$target);}} ?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pink-pink-pink</title>
    <link rel="stylesheet" href="./assets/style.css">
</head>
<body>
    <form name="ping" action="" method="post" onsubmit="return validateForm()">      
        <input name="ip" id="ip" type="text" class="feedback-input" placeholder="example.com" />   
        <button type="submit" name="Submit">PING</button>
        <div id="result" class="result"><?= "<pre>{$cmd}</pre>";?></div>
        <div id="modal" class="modal">
            <div class="modal-content">
                <p>Please enter IP address.</p>
                <span class="close-btn" onclick="closeModal()">&times;</span>
            </div>
        </div>
        <script>
            function validateForm() {
                var ipAddress = document.getElementById('ip').value;
                if (ipAddress.trim() === '') {
                    document.getElementById('modal').style.display = 'flex';
                    return false
                }
                return true;
            }
            function closeModal() {
                document.getElementById('modal').style.display = 'none';
            }
            if (<?= isset($_POST['Submit']) ? 'true' : 'false' ?>) {
                document.getElementById('result').style.display = 'block';
            }
        </script>
    </form>
</body>
</html>
